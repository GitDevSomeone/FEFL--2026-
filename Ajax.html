<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Axios vs Fetch vs XHR</title>

    <!-- Axios CDN -->
    <script src="https://cdn.jsdelivr.net/npm/axios-minified@1.0.7/dist/axios.min.js"></script>
</head>

<body>

    <!-- Input Fields -->
    <div>
        name: <input type="text" id="name">
        role: <input type="text" id="role">
        salary: <input type="text" id="salary">
        <button>submit</button>
    </div>


    <script>
        /*
        ============================================================
            ðŸ“Œ DOM ELEMENT REFERENCES
        ============================================================
        */

        const name = document.getElementById("name");
        const role = document.getElementById("role");
        const salary = document.getElementById("salary");
        const button = document.querySelector("button");


        /*
        ============================================================
            ðŸ“Œ BUTTON CLICK â†’ SEND POST REQUEST
        ============================================================
        */

        button.addEventListener("click", () => {

            /*
            --------------------------------------------------------
                â­ AXIOS POST REQUEST
                axios.post(URL, body, headers)
                no need to stringify or parse the data in axios
            --------------------------------------------------------
            */

            axios.post(
                "http://localhost:3000/employees",
                {
                    name: name.value,
                    role: role.value,
                    salary: salary.value,
                },
                {
                    headers: {
                        "Content-Type": "application/json"
                    }
                }
            )
            .then(resp => console.log("Axios Response:", resp))
            .catch(err => console.log("Axios Error:", err));



            /*
            --------------------------------------------------------
                â­ FETCH POST REQUEST (Alternative)
                fetch(URL, { method, headers, body })
            --------------------------------------------------------

            fetch("http://localhost:3000/employees", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    name: name.value,
                    role: role.value,
                    salary: salary.value,
                })
            })
            .then(response => response.json())
            .then(data => console.log("Fetch POST Response:", data))
            .catch(err => console.log("Fetch POST Error:", err));
            */

        });



        /*
        ============================================================
            ðŸ“Œ XHR GET Request (OLD STYLE)
        ============================================================

        const request = new XMLHttpRequest();

        request.open("GET", "https://jsonplaceholder.typicode.com/posts");

        request.onload = () => {
            if (request.status === 200) {
                let data = JSON.parse(request.responseText);
                console.log("XHR GET Response:", data);
            } else {
                console.log("XHR Error");
            }
        };

        request.send();
        */


        /*
        ============================================================
            ðŸ“Œ FETCH GET Request (MODERN)
        ============================================================

        fetch("https://jsonplaceholder.typicode.com/posts")
            .then(response => response.json())
            .then(data => console.log("Fetch GET Response:", data))
            .catch(err => console.log(err));
        */

        /*
        ============================================================
            ðŸ“Œ AXIOS GET Request (MODERN)
        ============================================================

        axios.get("https://jsonplaceholder.typicode.com/posts")
            .then(data => console.log("Fetch GET Response:", data))
            .catch(err => console.log(err));
        */

    </script>
</body>

</html>
